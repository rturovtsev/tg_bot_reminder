# Telegram Bot Reminder

Умный телеграм-бот для создания напоминаний с поддержкой естественного языка и повторяющихся событий.

## Возможности

- Естественное понимание времени на русском языке
- Повторяющиеся напоминания (ежедневно, еженедельно, ежемесячно)
- Простое управление через команды
- Надежное хранение в SQLite
- Поддержка Docker

## Установка и запуск

### Требования
- Go 1.23+
- SQLite3
- Токен Telegram бота

### Локальный запуск
```bash
# Клонирование репозитория
git clone <repository-url>
cd tg_bot_reminder

# Установка зависимостей
go mod download

# Запуск в режиме разработки
export BOT_TOKEN="your_bot_token_here"
export ENV=dev
go run ./cmd/bot
```

### Docker
```bash
# Сборка образа
docker build -t telegram-bot-reminder .

# Запуск контейнера
docker run -e BOT_TOKEN=your_bot_token_here telegram-bot-reminder
```

## Использование бота

### Команды

#### `/start`
Показывает приветствие и основные примеры использования

#### `/list`
Отображает все активные напоминания с их ID и типом повторения
```
ID: 1 - Принять витамины (ежедневно) Время срабатывания: 2024-01-15 09:00
ID: 2 - Встреча с клиентом Время срабатывания: 2024-01-16 14:30
```

#### `/delete [ID]`
Удаляет напоминание по ID
```
/delete 1
```

### Примеры сообщений

#### Обычные напоминания (одноразовые)
```
сегодня в 15:00 встреча с врачом
завтра в 9:30 звонок маме
в пятницу в 18:00 ужин с друзьями
через 2 часа проверить почту
14:00 следующего вторника презентация
в следующую среду в 12:25 обед
```

#### Повторяющиеся напоминания

**Ежедневные:**
```
каждый день в 9:00 принять витамины
ежедневно в 7:30 утренняя пробежка
каждые сутки в 22:00 почистить зубы
daily at 10:00 check emails
```

**Еженедельные:**
```
каждую неделю в понедельник в 14:00 планерка
еженедельно в субботу в 10:00 уборка
weekly on friday at 17:00 team meeting
```

**Ежемесячные:**
```
каждый месяц 1 числа в 10:00 оплатить квартиру
ежемесячно 15 числа в 12:00 подать отчет
monthly on 1st at 09:00 review budget
```

### Поддерживаемые форматы времени

#### Абсолютное время
- `сегодня в 15:30`
- `завтра в 9:00`
- `послезавтра в 12:00`

#### Относительное время
- `через 2 часа`
- `через 30 минут`
- `через день`

#### Дни недели
- `в понедельник в 14:00`
- `в пятницу после обеда`
- `в следующий вторник в 10:30`

#### Конкретные даты
- `15 января в 12:00`
- `1 числа в 9:00`
- `следующего месяца 10 числа`

### Ключевые слова для повторений

#### Ежедневно
- `каждый день`
- `ежедневно`
- `каждые сутки`
- `daily`

#### Еженедельно
- `каждую неделю`
- `еженедельно`
- `weekly`

#### Ежемесячно
- `каждый месяц`
- `ежемесячно`
- `monthly`

## Конфигурация

### Переменные окружения

| Переменная | Обязательная | Описание |
|------------|-------------|----------|
| `BOT_TOKEN` | Да | Токен Telegram бота |
| `ENV` | Нет | Режим работы (`dev` для разработки) |

### Режимы работы

**Разработка (`ENV=dev`):**
- Включен debug режим
- База данных: `reminders.db` в корне проекта
- Подробное логирование

**Продакшн:**
- Минимальное логирование
- База данных: `/app/data/reminders.db`
- Оптимизированная работа

## Примеры реальных сценариев

### Личные напоминания
```
каждый день в 8:00 выпить стакан воды
ежедневно в 21:00 планирование на завтра
завтра в 10:00 позвонить в банк
через час проверить тесто
```

### Рабочие задачи
```
каждую неделю в понедельник в 10:00 еженедельная планерка
ежемесячно 25 числа в 16:00 подготовить отчет
сегодня в 15:30 созвон с клиентом
в пятницу в 17:00 деплой на прод
```

### Бытовые дела
```
каждый месяц 1 числа в 9:00 оплатить коммуналку
еженедельно в субботу в 11:00 генеральная уборка
ежедневно в 19:00 полить цветы
завтра в 12:00 забрать посылку
```

## Технические детали

### Архитектура
- **Go** - основной язык
- **SQLite** - база данных
- **Telegram Bot API** - интеграция с Telegram
- **olebedev/when** - парсинг естественного языка времени

### База данных
```sql
CREATE TABLE reminders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    chat_id INTEGER,
    text TEXT,
    datetime DATETIME,
    repeat_type TEXT DEFAULT 'none',
    repeat_enabled BOOLEAN DEFAULT 0
);
```

### Dockerfile
Проект готов к деплою в Docker с multi-stage сборкой для оптимизации размера образа.

## Разработка

### Сборка
```bash
go build -o main ./cmd/bot
```

### Тестирование
```bash
go test ./...
```

### Форматирование кода
```bash
go fmt ./...
```

## Лицензия

MIT License

## Поддержка

При возникновении проблем создайте issue в репозитории.